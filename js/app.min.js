"use strict";const API="https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses",app=new Vue({el:"#app",data:{userSearch:"",showCart:!1,catalogUrl:"/catalogData.json",cartUrl:"/getBasket.json",cartItems:[],filtered:[],imgCart:"img/camera.jpg",products:[],imgProduct:"img/camera.jpg",error:!1},methods:{getJson(t){return fetch(t).then(t=>t.json()).catch(t=>{console.log(t),t=!0})},addProduct(e){this.getJson(`${API}/addToBasket.json`).then(s=>{if(1===s.result){let t=this.cartItems.find(t=>t.id_product===e.id_product);t?t.quantity++:(s=Object.assign({quantity:1},e),this.cartItems.push(s))}})},remove(s){this.getJson(`${API}/addToBasket.json`).then(t=>{1===t.result&&(1<s.quantity?s.quantity--:this.cartItems.splice(this.cartItems.indexOf(s),1))})},filter(){let s=new RegExp(this.userSearch,"i");this.filtered=this.products.filter(t=>s.test(t.product_name))}},mounted(){this.getJson(`${API+this.cartUrl}`).then(t=>{for(var s of t.contents)this.$data.cartItems.push(s)}),this.getJson(`${API+this.catalogUrl}`).then(t=>{for(var s of t)this.$data.products.push(s),this.$data.filtered.push(s)}),this.getJson("getProducts.json").then(t=>{for(var s of t)this.products.push(s),this.filtered.push(s)})}});